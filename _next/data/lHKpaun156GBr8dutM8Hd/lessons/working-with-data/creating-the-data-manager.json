{"pageProps":{"post":{"attributes":{},"html":"<p>We will create a set of classes responsible for managing the data of our app, a DataManager class in a new file <code>DataManager.dart</code>. It will include two repositories in lists and then some functions for the cart management.</p>\n<pre><code class=\"hljs language-dart\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;dart:convert&#x27;</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;package:http/http.dart&#x27;</span> <span class=\"hljs-keyword\">as</span> http;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;datamodel.dart&#x27;</span>;\n\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DataManager</span> </span>{\n  <span class=\"hljs-built_in\">List</span>&lt;Category&gt;? _menu;\n  <span class=\"hljs-built_in\">List</span>&lt;ItemInCart&gt; cart = [];\n\n  cartAdd(Product p) {\n    <span class=\"hljs-built_in\">bool</span> found = <span class=\"hljs-keyword\">false</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> item <span class=\"hljs-keyword\">in</span> cart) {\n      <span class=\"hljs-keyword\">if</span> (item.product.id == p.id) {\n        item.quantity++;\n        found = <span class=\"hljs-keyword\">true</span>;\n      }\n    }\n    <span class=\"hljs-keyword\">if</span> (!found) {\n      cart.add(ItemInCart(product: p, quantity: <span class=\"hljs-number\">1</span>));\n    }\n  }\n\n  cartDelete(Product p) {\n    cart.removeWhere((element) =&gt; element.product.id == p.id);\n  }\n\n  cartClear() {\n    cart.clear();\n  }\n\n  <span class=\"hljs-built_in\">double</span> cartTotal() {\n    <span class=\"hljs-keyword\">var</span> sum = <span class=\"hljs-number\">0.0</span>;\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">var</span> item <span class=\"hljs-keyword\">in</span> cart) {\n      sum += item.quantity * item.product.price;\n    }\n    <span class=\"hljs-keyword\">return</span> sum;\n  }\n}\n</code></pre>\n<h2 id=\"using-the-data-manager\">Using the Data Manager</h2>\n<p>We will create an instance of the DataManager at the App level in <code>HomePage</code> and pass it to final properties to the <code>MenuPage</code> and <code>OrderPage</code> that will need it.</p>\n<p>Your HomePage widget will start with:</p>\n<pre><code class=\"hljs language-dart\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">_MyHomePageState</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">State</span>&lt;<span class=\"hljs-title\">MyHomePage</span>&gt; </span>{\n  <span class=\"hljs-built_in\">int</span> _currentIndex = <span class=\"hljs-number\">0</span>;\n  DataManager dataManager = DataManager();\n\n  <span class=\"hljs-meta\">@override</span>\n  Widget build(BuildContext context) {\n    <span class=\"hljs-keyword\">late</span> Widget currentPage;\n    <span class=\"hljs-keyword\">switch</span> (_currentIndex) {\n      <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">0</span>:\n        currentPage = MenuPage(dataManager: dataManager);\n        <span class=\"hljs-keyword\">break</span>;\n      <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">1</span>:\n        currentPage = <span class=\"hljs-keyword\">const</span> OffersPage();\n        <span class=\"hljs-keyword\">break</span>;\n      <span class=\"hljs-keyword\">case</span> <span class=\"hljs-number\">2</span>:\n        currentPage = OrderPage(dataManager: dataManager);\n        <span class=\"hljs-keyword\">break</span>;\n    }\n    <span class=\"hljs-comment\">// continues ....</span>\n</code></pre>\n<p>At <code>MenuPage</code> and <code>OrderPage</code> we will add the final variables and also receive it as a required named argument in the constructor:</p>\n<pre><code class=\"hljs language-dart\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MenuPage</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>{\n  <span class=\"hljs-keyword\">final</span> DataManager dataManager;\n\n  <span class=\"hljs-keyword\">const</span> MenuPage({Key? key, <span class=\"hljs-keyword\">required</span> <span class=\"hljs-keyword\">this</span>.dataManager}) : <span class=\"hljs-keyword\">super</span>(key: key);\n    <span class=\"hljs-comment\">// continues ....</span>\n</code></pre>\n<p>Now MenuPage is ready to use the data.</p>\n","slug":"creating-the-data-manager","title":"Creating the Data Manager","section":"Working with Data","icon":"database","filePath":"/home/runner/work/intro-flutter/intro-flutter/lessons/04-working-with-data/C-creating-the-data-manager.md","nextSlug":"/intro-flutter/lessons/using-APIs-and-JSON/adding-dependencies","prevSlug":"/intro-flutter/lessons/working-with-data/Designing-the-menu-section"}},"__N_SSG":true}